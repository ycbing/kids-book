# AI绘本平台 - 环境变量配置示例
# 复制此文件为 .env 并填写实际配置

# ==================== 文本生成服务配置 ====================
# 文本API密钥
TEXT_API_KEY=sk-your-text-api-key-here

# 文本API基础URL
TEXT_BASE_URL=https://api.openai.com/v1

# 文本生成模型
TEXT_MODEL=gpt-3.5-turbo

# ==================== 图像生成服务配置 ====================
# 图像API密钥（可以与文本API使用不同的服务商）
IMAGE_API_KEY=sk-your-image-api-key-here

# 图像API基础URL（可以与文本API使用不同的服务商）
IMAGE_BASE_URL=https://api.openai.com/v1

# 图像生成模型
IMAGE_MODEL=dall-e-3

# 图像尺寸
IMAGE_SIZE=1024x1024

# ==================== 兼容旧配置（可选）====================
# 如果不设置上面的 TEXT_API_KEY 和 IMAGE_API_KEY，
# 系统将使用下面的 OPENAI_API_KEY 作为默认值
# OPENAI_API_KEY=sk-your-api-key-here
# OPENAI_BASE_URL=https://api.siliconflow.cn/v1

# ==================== API调用配置 ====================
# 请求超时时间（秒）- 针对第三方中转站可能较慢的情况
API_TIMEOUT=120

# 最大重试次数 - 遇到网络问题时自动重试
API_MAX_RETRIES=3

# 重试延迟（秒）
API_RETRY_DELAY=2

# 备用API地址（可选）- 主地址失败时自动切换
# API_BACKUP_BASE_URL=https://backup-api.example.com/v1

# 是否启用备用地址
API_ENABLE_FALLBACK=true

# ==================== 数据库配置 ====================
# 开发环境 - SQLite（默认）
DATABASE_URL=sqlite:///./picturebook.db

# 生产环境 - PostgreSQL（取消注释并配置）
# DATABASE_URL=postgresql://username:password@localhost:5432/picturebook

# 数据库连接池配置（仅PostgreSQL有效）
# DB_POOL_SIZE=5
# DB_MAX_OVERFLOW=10
# DB_POOL_RECYCLE=3600
# DB_ECHO=false

# ==================== Redis配置（可选）====================
# REDIS_URL=redis://localhost:6379/0

# ==================== API限流配置 ====================
# 全局限流开关（启用后会对所有请求应用限流）
RATE_LIMIT_ENABLED=false

# 全局限流配置（所有端点默认）
RATE_LIMIT_MAX_REQUESTS=100
RATE_LIMIT_WINDOW_SECONDS=60

# 严格限流配置（用于敏感端点，如创建、生成）
RATE_LIMIT_STRICT_MAX_REQUESTS=10
RATE_LIMIT_STRICT_WINDOW_SECONDS=60

# ==================== 应用配置 ====================
DEBUG=true
API_PREFIX=/api/v1

# ==================== 安全配置 ====================
# CORS允许的跨域来源（逗号分隔的域名列表）
# 开发环境配置
ALLOWED_ORIGINS=http://localhost:5173,http://localhost:3000,http://127.0.0.1:5173,http://127.0.0.1:3000

# 生产环境配置示例（取消注释并修改为实际域名）
# ALLOWED_ORIGINS=https://yourdomain.com,https://www.yourdomain.com

# JWT密钥配置（用于用户认证）
# 开发环境可以使用默认密钥，生产环境必须设置强密钥
# JWT_SECRET_KEY=your-production-secret-key-min-32-characters-long

# ==================== 文件上传配置 ====================
# 最大文件大小（字节）
# 默认5MB = 5 * 1024 * 1024 = 5242880
MAX_FILE_SIZE=5242880

# 允许的文件扩展名（逗号分隔）
# 默认只允许图片格式
ALLOWED_FILE_EXTENSIONS=.jpg,.jpeg,.png,.gif,.webp,.bmp

# 批量上传配置
MAX_BATCH_FILE_COUNT=10
MAX_BATCH_TOTAL_SIZE=20971520

