# ============================================
# AI绘本创作平台 - 环境变量配置示例
# ============================================
# 使用说明：
# 1. 复制此文件为 .env: cp .env.example .env
# 2. 填写你的实际配置值
# 3. .env 文件已加入 .gitignore，不会被提交到Git
# ============================================

# ================================
# 应用基础配置
# ================================

# 应用名称
APP_NAME=AI绘本创作平台

# 运行环境：development（开发） 或 production（生产）
DEBUG=true

# API前缀
API_PREFIX=/api/v1

# ================================
# 数据库配置
# ================================

# 数据库连接URL
# 开发环境（SQLite）: sqlite:///./picturebook.db
# 生产环境（PostgreSQL）: postgresql://user:password@localhost:5432/dbname
DATABASE_URL=sqlite:///./picturebook.db

# 数据库连接池配置（仅PostgreSQL有效）
DB_POOL_SIZE=5
DB_MAX_OVERFLOW=10
DB_POOL_RECYCLE=3600
DB_ECHO=false

# ================================
# AI服务配置 - 文本生成
# ================================

# 文本API密钥（必需）
# 获取方式：https://platform.openai.com/api-keys
# 或使用兼容OpenAI API格式的服务
TEXT_API_KEY=sk-your-text-api-key-here

# 文本API基础URL
# OpenAI官方: https://api.openai.com/v1
# 或兼容的第三方服务: https://your-api-endpoint.com/v1
TEXT_BASE_URL=https://api.openai.com/v1

# 使用的模型
# OpenAI: gpt-3.5-turbo, gpt-4, etc.
TEXT_MODEL=gpt-3.5-turbo

# ================================
# AI服务配置 - 图像生成
# ================================

# 图像API密钥（必需）
IMAGE_API_KEY=sk-your-image-api-key-here

# 图像API基础URL
IMAGE_BASE_URL=https://api.openai.com/v1

# 使用的模型
# OpenAI: dall-e-2, dall-e-3
IMAGE_MODEL=dall-e-3

# 图像尺寸
# 支持: 256x256, 512x512, 1024x1024, 1792x1024, 1024x1792
IMAGE_SIZE=1024x1024

# ================================
# 兼容性配置（旧版本支持）
# ================================

# OpenAI API密钥（如果TEXT_API_KEY和IMAGE_API_KEY都未设置，将使用此密钥）
OPENAI_API_KEY=
OPENAI_BASE_URL=

# ================================
# JWT认证配置
# ================================

# JWT密钥（生产环境必须设置强密钥）
# 生成方法: python -c "import secrets; print(secrets.token_urlsafe(32))"
JWT_SECRET_KEY=your-secret-key-here

# JWT过期时间（秒）
# 默认: 604800（7天）
JWT_EXPIRATION_SECONDS=604800

# ================================
# CORS跨域配置
# ================================

# 允许的跨域来源（逗号分隔）
# 开发环境示例: http://localhost:5173,http://localhost:3000
# 生产环境示例: https://yourdomain.com,https://www.yourdomain.com
ALLOWED_ORIGINS=http://localhost:5173,http://localhost:3000,http://127.0.0.1:5173,http://127.0.0.1:3000

# ================================
# 存储配置
# ================================

# 上传文件目录
UPLOAD_DIR=./uploads

# 输出文件目录
OUTPUT_DIR=./outputs

# ================================
# Redis配置（可选）
# ================================

# Redis连接URL（用于任务队列和缓存）
# 如果不需要Celery任务队列，可以不设置
REDIS_URL=redis://localhost:6379/0

# ================================
# API调用配置
# ================================

# API请求超时时间（秒）
API_TIMEOUT=120

# 最大重试次数
API_MAX_RETRIES=3

# 重试延迟（秒）
API_RETRY_DELAY=2

# 备用API地址（可选）
API_BACKUP_BASE_URL=

# 是否启用备用地址
API_ENABLE_FALLBACK=true

# ================================
# 日志配置（可选）
# ================================

# 日志级别: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_LEVEL=INFO

# 日志文件路径（可选，不设置则只输出到控制台）
# LOG_FILE=./logs/app.log

# ================================
# 监控和告警配置（可选）
# ================================

# Sentry错误追踪
# 获取方式: https://sentry.io/settings/projects/
SENTRY_DSN=
ENVIRONMENT=development

# Sentry采样率（生产环境建议降低以减少数据量）
# SENTRY_SAMPLE_RATE=1.0
# SENTRY_TRACES_SAMPLE_RATE=0.1
# SENTRY_PROFILES_SAMPLE_RATE=0.1

# Prometheus监控（自动启用）
# 访问 /metrics 端点获取指标

# Grafana和Prometheus配置（可选）
# PROMETHEUS_PUSHGATEWAY_URL=http://localhost:9091
# GRAFANA_API_KEY=

# 应用版本（用于错误追踪）
APP_VERSION=1.0.0

# 服务器名称（用于识别实例）
SERVER_NAME=ai-picture-book-backend

# ================================
# 邮件配置（可选，用于告警通知）
# ================================

# SMTP服务器
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your-email@gmail.com
SMTP_PASSWORD=your-app-password
SMTP_FROM=noreply@example.com
SMTP_FROM_NAME=AI绘本创作平台

# ================================
# 生产环境额外配置
# ================================

# 如果使用HTTPS
# SECURE_SSL_REDIRECT=true
# SSL_CERTIFICATE_PATH=/path/to/cert.pem
# SSL_KEY_PATH=/path/to/key.pem

# 如果使用CDN
# CDN_DOMAIN=https://cdn.yourdomain.com
# USE_CDN=false

# ================================
# 开发工具配置（仅开发环境）
# ================================

# 是否启用API文档（生产环境建议设为false）
# ENABLE_DOCS=true

# 是否启用CORS调试日志
# CORS_DEBUG=false

# ============================================
# 配置说明
# ============================================
#
# 1. 必需的环境变量:
#    - TEXT_API_KEY 或 OPENAI_API_KEY（文本生成）
#    - IMAGE_API_KEY 或 OPENAI_API_KEY（图像生成）
#    - DATABASE_URL（数据库）
#
# 2. 生产环境额外必需:
#    - JWT_SECRET_KEY（必须使用强密钥）
#    - DEBUG=false
#
# 3. 安全建议:
#    - 不要在代码中硬编码密钥
#    - 使用强随机密钥（至少32个字符）
#    - 定期轮换密钥
#    - 不要将.env文件提交到Git
#    - 生产环境使用HTTPS
#    - 限制ALLOWED_ORIGINS为受信任的域名
#
# 4. API密钥获取:
#    - OpenAI: https://platform.openai.com/api-keys
#    - 或使用兼容OpenAI的第三方服务
#
# 5. 生成强密钥:
#    Python: python -c "import secrets; print(secrets.token_urlsafe(32))"
#    Node: node -e "console.log(require('crypto').randomBytes(32).toString('base64'))"
#    OpenSSL: openssl rand -base64 32
#
# ============================================
